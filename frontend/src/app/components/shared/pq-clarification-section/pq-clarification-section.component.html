<h3 class="text-center mb-4">
  <i class="bi bi-question-circle-fill"></i> Clarification Requests
</h3>
<div class="clarification-container">
  <div class="clarification-carousel">
    <button
      class="carousel-arrow left"
      (click)="prevCard()"
      [disabled]="currentIndex === 0"
    >
      <i class="bi bi-chevron-left"></i>
    </button>

    <div class="carousel-track">
      <ng-container
        *ngFor="
          let mapping of clarificationRequests.mappingSuggestions;
          let i = index
        "
      >
        <div class="carousel-card" *ngIf="currentIndex === i">
          <app-pq-clarification-card
            [possibleActivities]="clarificationRequests.options"
            [mapping]="mapping"
            [selections]="selections"
          ></app-pq-clarification-card>
        </div>
      </ng-container>

      <!-- Recap card as last slide -->
      <div
        class="carousel-card"
        *ngIf="currentIndex === clarificationRequests.mappingSuggestions.length"
      >
        <app-recap-card [selections]="selections"></app-recap-card>
      </div>
    </div>

    <button
      class="carousel-arrow right"
      (click)="nextCard()"
      [disabled]="
        currentIndex >= clarificationRequests.mappingSuggestions.length
      "
    >
      <i class="bi bi-chevron-right"></i>
    </button>
  </div>
</div>
