<div class="container mt-5">
  <div class="alert alert-info mt-4" role="alert">
    <h5 class="alert-heading">ðŸ“„ What Are These Files?</h5>
    <p>
      To analyze your AI system and its provenance, please upload the following
      two files:
    </p>
    <ul>
      <li>
        <strong>TTL File (.ttl)</strong><br />
        This file contains a structured <em>workflow description</em> of your AI
        system, written in the
        <a
          href="https://www.w3.org/TR/turtle/"
          target="_blank"
          rel="noopener noreferrer"
          >Turtle (TTL)</a
        >
        RDF format. It defines the components, processes, and their
        relationships within the AI pipeline.
      </li>
      <li class="mt-2">
        <strong>TXT File (.txt)</strong><br />
        This file includes a list of <em>provenance-related questions</em> you
        want to ask about the AI workflow. Each line typically represents a
        single question related to system behavior, data lineage, or
        decision-making.
      </li>
    </ul>
    <p class="mb-0">
      By uploading both files, our system can link your questions to specific
      workflow components for analysis and reasoning.
    </p>
  </div>

  <p *ngIf="processId">Current process ID: {{ processId }}</p>

  <div class="row">
    <div class="mb-4 position-relative">
      <div
        *ngIf="ttlServerProcessing"
        class="position-absolute w-100 h-100 top-0 start-0 d-flex justify-content-center align-items-center"
        style="background: rgba(220, 220, 220, 0.7); z-index: 10"
      >
        <div
          class="spinner-border text-primary"
          role="status"
          style="width: 3rem; height: 3rem"
        >
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>
      <div
        class="drop-zone p-4 text-center border rounded"
        [class.drag-over]="dragOverTtl"
        (drop)="
          !ttlServerProcessing && !ttlProcessed && onFileDrop($event, 'ttl')
        "
        (dragover)="
          !ttlServerProcessing && !ttlProcessed && onDragOver($event, 'ttl')
        "
        (dragleave)="
          !ttlServerProcessing && !ttlProcessed && onDragLeave('ttl')
        "
      >
        <div *ngIf="!ttlProcessed">
          <p class="mb-2"><strong>Drop your .ttl file here</strong></p>
          <p *ngIf="ttlFile" class="text-success">âœ” {{ ttlFile.name }}</p>
          <p *ngIf="!ttlFile" class="text-muted">Only .ttl files accepted</p>
        </div>
        <div *ngIf="ttlProcessed">
          <p class="mb-2"><strong>TTL File Processed</strong></p>
          <span><i class="bi bi-check-circle-fill text-success"></i></span>
        </div>
      </div>
    </div>
    <div class="mb-4 position-relative">
      <div
        *ngIf="txtServerProcessing"
        class="position-absolute w-100 h-100 top-0 start-0 d-flex justify-content-center align-items-center"
        style="background: rgba(220, 220, 220, 0.7); z-index: 10"
      >
        <div
          class="spinner-border text-primary"
          role="status"
          style="width: 3rem; height: 3rem"
        >
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>
      <div
        class="drop-zone p-4 text-center border rounded"
        [class.drag-over]="dragOverTxt"
        (drop)="
          !txtServerProcessing && !ttlProcessed && onFileDrop($event, 'txt')
        "
        (dragover)="
          !txtServerProcessing && !ttlProcessed && onDragOver($event, 'txt')
        "
        (dragleave)="
          !txtServerProcessing && !ttlProcessed && onDragLeave('txt')
        "
      >
        <div *ngIf="txtProcessed">
          <p class="mb-2"><strong>TXT File Processed</strong></p>
          <span><i class="bi bi-check-circle-fill text-success"></i></span>
        </div>
        <div *ngIf="!txtProcessed">
          <p class="mb-2"><strong>Drop your .txt file here</strong></p>
          <p *ngIf="txtFile" class="text-success">âœ” {{ txtFile.name }}</p>
          <p *ngIf="!txtFile" class="text-muted">Only .txt files accepted</p>
        </div>
      </div>
    </div>

    <button
      class="btn btn-primary mt-3 d-block mx-auto"
      [disabled]="!ttlFile || !txtFile"
      (click)="onSubmit()"
      *ngIf="
        !ttlServerProcessing &&
        !txtServerProcessing &&
        !ttlProcessed &&
        !txtProcessed
      "
    >
      Submit Files
    </button>

    <button
      class="btn btn-primary mt-3 d-block mx-auto"
      (click)="goToUnification()"
      *ngIf="txtProcessed && ttlProcessed"
    >
      Continue to Unification Step
    </button>
  </div>
</div>
